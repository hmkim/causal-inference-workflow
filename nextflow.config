// Nextflow configuration for causal inference workflow

params {
    // Input parameters
    outdir = "results"
    
    // Container settings
    container = "664263524008.dkr.ecr.us-east-1.amazonaws.com/causal-inference:latest"
}

// Process configuration
process {
    // Default container for all processes
    container = params.container
    
    // Resource allocation
    cpus = 2
    memory = '4 GB'
    
    // Error handling
    errorStrategy = 'retry'
    maxRetries = 2
}

// Docker configuration
docker {
    enabled = true
    runOptions = '-u $(id -u):$(id -g)'
}

// Singularity configuration (alternative to Docker)
singularity {
    enabled = false
    autoMounts = true
}

// Execution profiles
profiles {
    standard {
        process.executor = 'local'
    }
    
    docker {
        docker.enabled = true
        process.container = params.container
    }
    
    singularity {
        singularity.enabled = true
        docker.enabled = false
        process.container = params.container
    }
}
